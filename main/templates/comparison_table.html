
{% extends 'base.html' %}

{% block content %}

<div class="section">
  <h2 class="title">月別作業比較</h2>

  <!-- ✅ フォームをテーブル外に移動 -->
  <form method="get" action="{% url 'report_comparison' %}" style="display: flex; justify-content: center; align-items: center; gap: 10px; margin-bottom: 20px;">
    <label>年:
      <select name="compare_year">
        {% for y in years %}
          <option value="{{ y }}" {% if y == compare_year %}selected{% endif %}>{{ y }}</option>
        {% endfor %}
      </select>
    </label>
    <label>月:
      <select name="compare_month">
        {% for m in months %}
          <option value="{{ m }}" {% if m == compare_month %}selected{% endif %}>{{ m }}</option>
        {% endfor %}
      </select>
    </label>
    <button type="submit" style="padding: 4px 10px;">比較</button>
  </form>

  <table class="styled-table">
    <thead>
      <tr>
        <th>項目</th>
        <th>今月</th>
        <th>比較月</th>
        <th>増減</th>
        <th>増減率</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>総合計作業時間</td>
        <td>{{ comparison.current.total }}</td>
        <td>{{ comparison.compare.total }}</td>
        <td>{{ comparison.diff_total }}</td>
        <td>{{ comparison.rate_total }}</td>
      </tr>
      <tr>
        <td>総平均作業時間</td>
        <td>{{ comparison.current.average }}</td>
        <td>{{ comparison.compare.average }}</td>
        <td>{{ comparison.diff_avg }}</td>
        <td>{{ comparison.rate_avg }}</td>
      </tr>
      <tr>
        <td>総件数</td>
        <td>{{ comparison.current.count }}件</td>
        <td>{{ comparison.compare.count }}件</td>
        <td>{{ comparison.diff_count }}</td>
        <td>{{ comparison.rate_count }}</td>
      </tr>
    </tbody>
  </table>

  <div style="text-align: center; margin-top: 20px;">
    <a href="{% url 'home' %}" class="button">ホームに戻る</a>

  </div>
</div>
{% endblock %}
